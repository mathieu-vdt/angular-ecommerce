<main>
    <div class="start-page">
        <img src="assets/background.jpg" alt="" class="bg-image">
        <img src="assets/clouds/cloud-large.png" alt="" class="large-cloud">
        <img src="assets/clouds/cloud-large.png" alt="" class="large-cloud-2">
        <app-navbar></app-navbar>
        <div class="container mx-auto px-4 pt-[8vh] sm:pt-[20vh] ">
            <h1 class="text-center font-bold text-white mt-2 sm:mt-10 text-4xl sm:text-9xl md:text-6xl lg:text-9xl opacity-[0.8]">Angular E-commerce Platform</h1>
            <p class="text-center text-white mt-4 text-xl sm:text-2xl opacity-[.6]">by Mathieu Vidot</p>
        </div>
    </div>
   <div class="slider-logos w-[90%] sm:w-[55%] md:w-[70%] flex justify-center items-center justify-self-center pb-10">
        <div
            x-data="{}"
            x-init="$nextTick(() => {
                let ul = $refs.logos;
                ul.insertAdjacentHTML('afterend', ul.outerHTML);
                ul.nextSibling.setAttribute('aria-hidden', 'true');
            })"
            class="w-75 inline-flex flex-nowrap overflow-hidden [mask-image:_linear-gradient(to_right,transparent_0,_black_128px,_black_calc(100%-128px),transparent_100%)]"
        >
            <ul x-ref="logos" class="flex items-center justify-center md:justify-start [&_li]:mx-8 [&_img]:max-w-none animate-infinite-scroll">
                <ng-container *ngFor="let logo of logos">
                    <li>
                        <img [src]="logo" class="logo-img h-5 sm:h-8 px-2 sm:px-4" alt="logo" />
                    </li>
                </ng-container>
            </ul>
            <ul x-ref="logos" class="flex items-center justify-center md:justify-start [&_li]:mx-8 [&_img]:max-w-none animate-infinite-scroll">
                <ng-container *ngFor="let logo of logos">
                    <li>
                        <img [src]="logo" class="logo-img h-5 sm:h-8 px-2 sm:px-4" alt="logo" />
                    </li>
                </ng-container>
            </ul>         
        </div>
   </div>
   <div class="products mx-[2em]">
    <p-panel>
        <p-dataview #dv 
            [value]="products" 
            [layout]="grid ? 'grid' : 'list'"
            [paginator]="true"
            [rows]="8"
            [rowsPerPageOptions]="[8, 16, 24]">

            <ng-template #grid let-items>
                <div class="grid grid-cols-12 gap-4">
                    <div *ngFor="let product of items" class="col-span-12 sm:col-span-6 md:col-span-4 xl:col-span-3 p-2">
                    <p-card styleClass="product-card h-full">
                        <!-- Image box avec ratio fixe + cover -->
                        <div class="product-image-box">
                        <img
                            [src]="product.image_url || 'assets/placeholder.png'"
                            alt="Product image"
                            class="product-image"
                        />
                        </div>

                        <!-- Contenu flexible pour égaliser les hauteurs -->
                        <div class="flex flex-col items-center gap-2 py-3 flex-1">
                        <!-- Titre centré + ellipsis -->
                        <div class="product-title" title="{{ product.name }}">{{ product.name }}</div>

                        <!-- Catégorie (optionnelle) -->
                        <div class="text-secondary text-sm text-center">
                            {{ product.category?.name }}
                        </div>

                        <!-- Prix -->
                        <div class="text-xl font-semibold text-center">
                            {{ '$' + product.price }}
                        </div>

                        <!-- Actions collées en bas si besoin -->
                        <div class="flex gap-2 mt-2">
                            <p-button label="View" [routerLink]="['/products', product.id]"></p-button>
                            <p-button [rounded]="true" [text]="true" styleClass="p-button-secondary" (click)="cart.add(product, 1)">
                            <i class="pi pi-cart-plus" style="font-size: 1.5rem"></i>
                            </p-button>
                        </div>
                        </div>
                    </p-card>
                    </div>
                </div>
            </ng-template>

        </p-dataview>
    </p-panel>
    </div>
</main>
<app-footer></app-footer>