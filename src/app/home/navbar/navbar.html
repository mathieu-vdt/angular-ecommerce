<!-- TOP BAR -->
<p-toolbar
  [style]="{
    'background': isHome ? 'transparent' : '#ffffff',
    'box-shadow': isHome ? 'none' : '0 2px 6px rgba(0,0,0,.06)',
    'border': 'none',
    'padding': '1rem 2rem'
  }"
>
  <div class="p-toolbar-group-start flex items-center gap-2">
    <!-- Logo -->
    <a routerLink="/" class="flex items-center font-bold text-xl gap-2">
      <img src="assets/logoMathieu_black.png" alt="Logo" class="h-8" />
    </a>
  </div>

  <!-- Liens CENTRÃ‰S (desktop) -->
  <div class="hidden lg:flex p-toolbar-group-center flex-1 justify-center">
    <ul class="flex gap-8">
      <li *ngFor="let l of links"
          [routerLinkActive]="isHome ? ['is-active-home'] : ['is-active']"
          [routerLinkActiveOptions]="{ exact: l.routerLink === '/' }">
        <a
          [routerLink]="l.routerLink"
          class="nav-link relative font-semibold flex items-center gap-2
                after:block after:h-[2px] after:w-0 after:bg-current after:transition-all after:duration-200
                after:absolute after:left-1/2 after:-translate-x-1/2 after:-bottom-1
                hover:after:w-full focus-visible:after:w-full"
          [ngClass]="isHome ? 'text-white hover:text-white' : 'text-[#262626] hover:text-sky-600'"
        >
          <i [class]="l.icon"></i>
          {{ l.label }}
        </a>
      </li>
    </ul>
  </div>


  <!-- Actions DROITE (desktop) + burger mobile -->
<div class="p-toolbar-group-end flex items-center gap-3">
  <!-- Actions desktop uniquement -->
  <div class="hidden lg:flex items-center gap-3">
    <ng-container *ngIf="isLoggedIn; else loggedOut">
      <!-- Logout (texte) -->
      <button
        pButton
        class="p-button-text"
        (click)="logout()"
        [ngClass]="isHome ? 'text-white' : 'text-[#262626]'">
        <i class="pi pi-sign-out mr-2"></i>
        Logout
      </button>
    </ng-container>

    <ng-template #loggedOut>
      <!-- Log in (texte) -->
      <a
        routerLink="/login"
        class="group relative flex items-center gap-2 font-medium
              after:block after:h-[2px] after:w-0 after:bg-current after:transition-all after:duration-200 after:absolute after:left-1/2 after:-translate-x-1/2 after:-bottom-1
              hover:after:w-full focus-visible:after:w-full"
        [ngClass]="isHome ? 'text-white hover:text-white' : 'text-[#262626] hover:text-sky-600'"
      >
        <i class="pi pi-sign-in"></i>
        Log in
      </a>


      <!-- Sign In (outlined) : blanc sur home -->
      <a
        routerLink="/register"
        pButton
        class="p-button-outlined"
        [ngStyle]="registerStyles"
        (mouseenter)="isRegisterHovered = true"
        (mouseleave)="isRegisterHovered = false"
      >
        <i class="pi pi-user-plus mr-2"></i>
        Sign In
      </a>
    </ng-template>
  </div>

  <!-- Burger mobile uniquement -->
  <div class="lg:hidden">
    <button
  pButton
  class="p-button-text lg:hidden"
  type="button"
  (click)="sidebarVisible = true"
  [ngStyle]="isHome ? { color: '#fff' } : { color: '#262626' }"
  aria-label="Menu"
>
  <i class="pi pi-bars text-xl"></i>
</button>

  </div>
</div>

</p-toolbar>

<!-- SIDEBAR MOBILE -->
<p-drawer [(visible)]="sidebarVisible" position="left" [modal]="true" [dismissible]="true" [showCloseIcon]="true">
  <div class="flex flex-col gap-6">
    <!-- Liens -->
    <nav>
      <ul class="flex flex-col gap-4">
        <li *ngFor="let l of links">
          <a
            [routerLink]="l.routerLink"
            routerLinkActive="active-link"
            class="group flex items-center gap-2 relative font-semibold
                  after:block after:h-[2px] after:w-0 after:bg-current after:transition-all after:duration-200 after:absolute after:left-1/2 after:-translate-x-1/2 after:-bottom-1
                  hover:after:w-full focus-visible:after:w-full"
            [ngClass]="isHome ? 'text-white hover:text-white' : 'text-[#262626] hover:text-sky-600'"
          >
            <i [class]="l.icon"></i>
            {{ l.label }}
          </a>

        </li>
      </ul>
    </nav>

    <hr class="border-surface-200" />

    <!-- Actions -->
    <div class="flex flex-col gap-3">
      <ng-container *ngIf="isLoggedIn; else loggedOutM">
        <button pButton class="p-button-outlined w-full" (click)="logout()">
          <i class="pi pi-sign-out mr-2"></i> Logout
        </button>
      </ng-container>
      <ng-template #loggedOutM>
        <a routerLink="/login" pButton class="p-button-text w-full" (click)="sidebarVisible = false">
          <i class="pi pi-sign-in mr-2"></i> Log in
        </a>
        <a routerLink="/register" pButton class="p-button-outlined w-full" (click)="sidebarVisible = false">
          <i class="pi pi-user-plus mr-2"></i> Sign In
        </a>
      </ng-template>
    </div>
  </div>
</p-drawer>
