<p-dialog [header]="(formData.id ? 'Edit Product' : 'Create Product')" 
           [(visible)]="visible" 
           [modal]="true" 
           [closable]="false" 
           styleClass="w-96">

  <div class="p-fluid space-y-4">
    <!-- Name -->
    <div class="field">
      <label for="name" class="block text-sm font-semibold text-gray-800">Name</label>
      <input id="name" type="text" pInputText [(ngModel)]="formData.name"
             class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>

    <!-- Description -->
    <div class="field">
      <label for="description" class="block text-sm font-semibold text-gray-800">Description</label>
      <textarea id="description" pInputTextarea [(ngModel)]="formData.description"
                rows="3"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
    </div>

    <!-- Price -->
    <div class="field">
      <label for="price" class="block text-sm font-semibold text-gray-800">Price</label>
      <input id="price" type="number" pInputText [(ngModel)]="formData.price"
             class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>

    <!-- Stock -->
    <div class="field">
      <label for="stock" class="block text-sm font-semibold text-gray-800">Stock</label>
      <input id="stock" type="number" pInputText [(ngModel)]="formData.stock"
             class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"/>
    </div>

    <!-- Image Upload -->
    <div class="field">
      <label for="image" class="block text-sm font-semibold text-gray-800">Image</label>
      <p-fileUpload name="file"
                    mode="basic"
                    accept="image/*"
                    customUpload="true"
                    (uploadHandler)="onImageUpload($event)"
                    [auto]="true"
                    chooseLabel="Choose Image">
      </p-fileUpload>

      <!-- Preview -->
      <div *ngIf="formData.image_url" class="mt-2">
        <img [src]="formData.image_url" alt="preview" class="w-32 h-32 object-cover rounded"/>
      </div>
    </div>

    <!-- Category -->
    <div class="field">
      <label for="category" class="block text-sm font-semibold text-gray-800">Category</label>
      <p-select id="category"
                [(ngModel)]="formData.idCategory"
                [options]="categories"
                optionLabel="name"
                optionValue="id"
                placeholder="Select Category"
                appendTo="body"
                class="w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
      </p-select>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-2">
      <p-button label="Cancel" severity="secondary" (click)="onCancel()" [disabled]="isSaving"/>
      <p-button label="Save" (click)="onSave()" [loading]="isSaving" [disabled]="isSaving"/>
    </div>
  </ng-template>
</p-dialog>
